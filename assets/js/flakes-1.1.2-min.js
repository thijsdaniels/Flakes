// Flakes v1.1.2 (minified) | (c) 2013 Daniels Design
function generateFlake(){var e=-10+Math.round(Math.random()*110)+"%";var t=-10+Math.round(Math.random()*110)+"%";var n=1+Math.ceil(Math.pow(Math.random(),3)*maxDepth);var r=200+Math.round((1-n/maxDepth)*50);var i="rgb("+r+", "+r+", "+r+")";var s=n/maxDepth*200;var o=document.createElement("div");$(o).addClass("flake");$(o).css({position:"absolute",left:e,top:t,"z-index":n,"background-color":i,height:s,width:s,display:"none",opacity:.25,"border-radius":"0px"});if(n>5&&Math.random()<.05){$(o).css({"background-color":"#FC0",opacity:.75})}moveFlake(o,mouseX,mouseY);$("body").append(o);$(o).fadeIn(1e3);var u="-="+n*20;$(o).animate({top:u},{duration:15e3,easing:"linear",queue:false});$(o).bind("click",function(e){$(o).css({"background-color":"#FC0",opacity:.75})});setTimeout(function(){$(o).animate({opacity:0},{duration:1e3,queue:false,complete:function(){$(o).remove()}})},15e3-1e3)}function moveFlake(e,t,n){var r=0-($(window).width()*.5-t)/($(window).width()*.5);var i=0-($(window).height()*.5-n)/($(window).height()*.5);var s=$(e).css("z-index");var o=(maxDepth-s)*maxDepth*3*r;var u=(maxDepth-s)*maxDepth*1.5*i;$(e).css({"margin-left":o,"margin-top":u})}function moveFlakes(e,t,n){var r=0-($(window).width()*.5-t)/($(window).width()*.5);var i=0-($(window).height()*.5-n)/($(window).height()*.5);for(var s=0;s<e.length;s++){flake=e[s];var o=$(flake).css("z-index");var u=(maxDepth-o)*maxDepth*3*r;var a=(maxDepth-o)*maxDepth*1.5*i;$(flake).css({"margin-left":u,"margin-top":a})}}function switchContainer(e){if(currentContainer!=null&&$(currentContainer).attr("id")!=$(e).attr("id")){var t=currentContainer;currentContainer=null;$(e).removeClass("link");$(t).children("div#back").animate({opacity:0},animationDuration,function(){$(t).children("div#back").css("display","none")});$(e).children("div#front").animate({opacity:0},animationDuration,function(){$(e).children("div#front").css("display","none")});var n=$(t).attr("size")+"px";setTimeout(function(){$(t).animate({width:n,height:n,left:$(e).css("left"),top:$(e).css("top"),zIndex:$(e).css("z-index"),marginLeft:$(e).css("margin-left"),marginTop:$(e).css("margin-top")},{duration:animationDuration,specialEasing:{width:"swing",height:"swing",left:"easeInQuad",top:"easeInQuad",zIndex:"easeInQuad",marginLeft:"easeInQuad",marginTop:"easeInQuad"}});$(e).animate({width:openContainerSize,height:openContainerSize,left:$(t).css("left"),top:$(t).css("top"),zIndex:$(t).css("z-index"),marginLeft:$(t).css("margin-left"),marginTop:$(t).css("margin-top")},{duration:animationDuration,specialEasing:{width:"swing",height:"swing",left:"easeInQuad",top:"easeInQuad",zIndex:"easeInQuad",marginLeft:"easeInQuad",marginTop:"easeInQuad"}});setTimeout(function(){$(t).children("div#front").css("display","block");$(e).children("div#back").css("display","block");$(t).children("div#front").animate({opacity:1},animationDuration);$(e).children("div#back").animate({opacity:1},animationDuration);setTimeout(function(){currentContainer=e;$(t).addClass("link")},animationDuration)},animationDuration+animationDelay)},animationDuration+animationDelay)}}function placeContainers(){var e=parseInt($("div#bio").css("height"));var t=Math.round($(window).width()*.15-e*.5);var n=Math.round($(window).height()*.25-e*.5);$("div#bio").css({left:t,top:n});$("div#bio").bind("click",function(){switchContainer($("div#bio").get())});var r=parseInt($("div#home").css("height"));var i=Math.round($(window).width()*.5-r*.5);var s=Math.round($(window).height()*.5-r*.5);$("div#home").css({left:i,top:s});$("div#home div#front").css({display:"none",opacity:0});$("div#home div#back").css({display:"block",opacity:1});$("div#home").bind("click",function(){switchContainer($("div#home").get())});var o=parseInt($("div#contact").css("height"));var u=Math.round($(window).width()*.85-o*.5);var a=Math.round($(window).height()*.75-o*.5);$("div#contact").css({left:u,top:a});$("div#contact").bind("click",function(){switchContainer($("div#contact").get())});var f=parseInt($("div#showcase").css("height"));var l=Math.round($(window).width()*.1-f*.5);var c=Math.round($(window).height()*.85-f*.5);$("div#showcase").css({left:l,top:c});$("div#showcase").bind("click",function(){switchContainer($("div#showcase").get())})}function updateFlakeCounter(){var e=$(".flake").get().length+" Flakes";$("div#flake_counter").text(e)}function bindProjectDescriptions(){$("div.project").bind("mouseover",function(e){$(this).children("div.title").animate({opacity:0},300);$(this).children("div.description").animate({opacity:.9},300)});$("div.project").bind("mouseout",function(e){$(this).children("div.title").animate({opacity:.9},300);$(this).children("div.description").animate({opacity:0},300)})}function bindFormWarnings(){$("form#contact_form input#contact_name").bind("blur",function(){if(!$(this).val()){$(this).addClass("warning")}else{$(this).removeClass("warning")}});$("form#contact_form input#contact_email").bind("blur",function(){if(!$(this).val().match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,6}$/i)){$(this).addClass("warning")}else{$(this).removeClass("warning")}});$("form#contact_form textarea#contact_message").bind("blur",function(){if(!$(this).val()){$(this).addClass("warning")}else{$(this).removeClass("warning")}})}function submitContactForm(){var e=true;if(!$("form#contact_form input#contact_name").val()){$("form#contact_form input#contact_name").addClass("warning");$("form#contact_form input#contact_name").effect("shake",{distance:10,times:2});e=false}if(!$("form#contact_form input#contact_email").val().match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,6}$/i)){$("form#contact_form input#contact_email").addClass("warning");$("form#contact_form input#contact_email").effect("shake",{distance:10,times:2});e=false}if(!$("form#contact_form textarea#contact_message").val()){$("form#contact_form textarea#contact_message").addClass("warning");$("form#contact_form textarea#contact_message").effect("shake",{distance:10,times:2});e=false}if(e){$("form#contact_form").submit()}}function bindAgeCounter(){var e=new Date(1989,4,4);var t=e.getTime();setInterval(function(){updateAge(t)},1e3)}function updateAge(e){var t=Date.now()-e;var n=t/(millisInSecond*secondsInMinute*minutesInHour*hoursInDay*daysInYear);n=n.toFixed(7);$("#age").text(n)}var version="1.1.2";var maxDepth=15;var mouseX=Math.round($(window).width()*.5);var mouseY=Math.round($(window).height()*.5);var currentContainer;var openContainerSize="500px";var animationDuration=400;var animationDelay=100;var millisInSecond=1e3;var secondsInMinute=60;var minutesInHour=60;var hoursInDay=24;var daysInYear=365.24218967;$(document).bind("ready",function(){$("div#version").html("Version "+version);placeContainers();currentContainer=$("div#home").get();bindProjectDescriptions();bindFormWarnings();bindAgeCounter();setInterval(function(){generateFlake();updateFlakeCounter()},100);$(this).bind("mousemove",function(e){mouseX=e.pageX;mouseY=e.pageY;moveFlakes($("div.flake").get(),mouseX,mouseY)});$("div.container").fadeIn(500)})